# 1 需求

**在线考试管理系统，模块如下：**

- **登录模块**

- **权限模块**

- **菜单管理模块**

- **院系管理模块**
- **专业管理模块**
- **角色管理模块**

- **用户管理模块**

- **班级管理模块**

# 2 技术选型

**前端：html+bootstrap模板，jQuery，ajax**

**后端：java，springboot，mybatis，mysql**

 

# 3 环境准备

 **jdk1.8环境变量**

**mysql8**

**maven环境变量**

**idea社区版**

# 4 idea社区版创建springboot工程

 

## 4.1 设置自定义全局maven

**1、选择关闭当前项目**

![img](https://raw.githubusercontent.com/cute-karl/shixunimage/main/wps2.jpg) 

 

 

**2、选择Customize，点击Configure**

![img](https://raw.githubusercontent.com/cute-karl/shixunimage/main/wps3.jpg) 

 

 

**3、查询maven，在左侧菜单点击选择Maven，填写外部maven的路径，填写自己的settings.xml文件，会自动填写本地仓库的路径，把2个Override的复选框勾选上**

![img](https://raw.githubusercontent.com/cute-karl/shixunimage/main/wps4.jpg) 

 

**4、点击Apply，点击OK**

## 4.2 创建maven工程

**new project，选择Maven ，选择jdk**

![img](https://raw.githubusercontent.com/cute-karl/shixunimage/main/wps5.jpg) 

 

**点击Next按钮，工程路径（会自动带出工程名），填写GroupId和ArtifactId**

![img](https://raw.githubusercontent.com/cute-karl/shixunimage/main/wps6.jpg) 

 

**点击Finish，会得到类似以下的项目结构**

![img](https://raw.githubusercontent.com/cute-karl/shixunimage/main/wps7.jpg) 













## 4.3 配置springboot+mybatis项目

### 4.3.1 配置pom.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <!-- 引入springboot的父工程 -->
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>2.6.2</version>
        <relativePath/> <!-- lookup parent from repository -->
    </parent>

    <groupId>com.shixun.skd.xg19</groupId>
    <artifactId>emis</artifactId>
    <version>1.0-SNAPSHOT</version>

    <!-- 配置信息 -->
    <properties>
        <!-- java的jdk版本 -->
        <java.version>1.8</java.version>
    </properties>

    <!-- 所有的依赖，指定需要加载的第三方jar包以及它的版本 -->
    <dependencies>
        <!-- springboot的web模块，接收请求和响应请求 -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>

        <!-- mybatis与springboot整合依赖 -->
        <dependency>
            <groupId>org.mybatis.spring.boot</groupId>
            <artifactId>mybatis-spring-boot-starter</artifactId>
            <version>2.2.1</version>
        </dependency>

        <!-- mysql驱动 -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <scope>runtime</scope>
        </dependency>

        <!-- mybatis逆向工程依赖 -->
        <dependency>
            <groupId>org.mybatis.generator</groupId>
            <artifactId>mybatis-generator-core</artifactId>
            <version>1.4.0</version>
        </dependency>

        <!-- 数据库连接池 -->
        <dependency>
            <groupId>com.alibaba</groupId>
            <artifactId>druid</artifactId>
            <version>1.1.23</version>
        </dependency>



        <!-- json 相关工具类 -->
        <dependency>
            <groupId>com.alibaba</groupId>
            <artifactId>fastjson</artifactId>
            <version>1.2.73</version>
        </dependency>

        <!-- poi解析Excel文件的依赖 -->
        <dependency>
            <groupId>org.apache.poi</groupId>
            <artifactId>poi</artifactId>
            <version>3.14</version>
        </dependency>
        <dependency>
            <groupId>org.apache.poi</groupId>
            <artifactId>poi-ooxml</artifactId>
            <version>3.14</version>
        </dependency>
    </dependencies>

    <build>
        <defaultGoal>compile</defaultGoal>
        <!--
        springboot项目启动时，默认过滤掉src/main/java下的所有xml文件
        我们要使用mybatis，mybatis的xml文件在mapper包下，mapper在src/main/java下
        需要通过以下配置，指定pringboot项目启动时，不过滤src/main/java下的所有xml文件
        -->
        <resources>
            <resource>
                <directory>src/main/java</directory>
                <includes>
                    <include>**/*.xml</include>
                </includes>
                <filtering>false</filtering>
            </resource>
        </resources>
    </build>

</project>
```

### 4.3.2 在src/main/resources下添加application.yml配置文件

![屏幕截图 2023-09-21 215543](https://raw.githubusercontent.com/cute-karl/shixunimage/main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-21%20215543.png)

# 5 springboot的静态资源

**这里的静态资源主要是html、js、css和图片等。**

## 5.1 静态资源存放

**springboot的静态资源是放在src/main/resources/static文件夹下，可以在static文件夹下创建多级子文件夹，用来存放静态资源。类似下图。**

![image-20230921215858983](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921215858983.png)

## 5.2 直接访问静态资源

访问的时候，路径从static开始（不包括static文件夹），例如，在static文件夹下有一个pages文件夹，pages文件夹中有一个index.html，那么访问路径就是“ip:port/上下文/pages/index.html”，这是直接访问静态资源。

**注意：如果发现在static文件夹下添加了静态资源之后无法访问，尝试maven clean，maven install，然后再次访问。**

## 5.3 controller跳转前端页面

**如果想要通过controller跳转到html页面，那么需要在application.yml文件中配置html文件的前缀（html所属文件夹）和后缀（.html），配置如下。**

![image-20230921220056851](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921220056851.png)

## 5.4 idea实时刷新前端代码

 

**1、“File” -> “Settings” -> “Build,Execution,Deplyment” -> “Compiler”，选中打勾 “Build project automatically” 。**

![img](https://raw.githubusercontent.com/cute-karl/shixunimage/main/wps8.jpg) 

 

**2、开启compiler.automake.allow.when.app.running**

**“File” -> “Settings” -> “Advanced Settings” ，勾选下图所示选项**

![img](https://raw.githubusercontent.com/cute-karl/shixunimage/main/wps9.jpg)

# 6 jQuery

 

**前端页面部分也有逻辑需要编写代码，这里使用jQuery。在需要使用jQuery的页面引入jQuery即可。**

 

## 6.1 页面中引用jQuery

**示例，**

**我这里是在src/main/webapp下创建js文件夹，把jquery-3.4.1.js拷贝到js文件夹，在src/main/webapp/index.html中引用jquery-3.4.1.js。**

![image-20230921220416149](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921220416149.png)

引用代码：

![image-20230921220436168](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921220436168.png)

## 6.2 具体教程

**jQuery有很多在线文档**

**以菜鸟教程的jQuery为例。地址**[**https://www.runoob.com/jquery/jquery-tutorial.html**](https://www.runoob.com/jquery/jquery-tutorial.html) 

**这里内容很多，我们暂时只关注参考手册的内容即可。**

# 7 根据AdminLTE模板构建管理类系统的静态页模板

## 7.1 AdminLTE

**我使用的模板是AdminLTE，基于boostrap和jQuery开发的，其中包含大量前端组件，我们可以根据需要灵活组合使用。**

**AdminLTE模板页面的基本结构是“左、上、下”页面三分的结构，这种结构是目前绝大多数管理类系统的页面结构。**

**以下是AdminLTE模板页面的“左、上、下”页面三分的结构与代码的对应。**

![img](https://raw.githubusercontent.com/cute-karl/shixunimage/main/wps12.jpg)

## 7.2 构建管理类系统的静态页模板

**管理类系统的页面类型大概有以下几类：**

**1、登录页（大多数的管理类系统都没有注册页，需要通过用户管理模块增加用户）。**

**2、欢迎页，登录成功后进入的首页。**

**3、列表页，展示数据集合的表格，一般带分页和查询功能，展示的每行数据的最后会有可以点击的“修改”和“删除”功能。**

**4、新增/修改页，一个form表单，同一个的功能模块的新增/修改页的表单元素是一致的，只是修改页需要回填数据。**

**5、其他特殊页，例如在线答题页、数据统计页、文件上传页等等，这些在管理类系统中的占比很小。**

### 7.2.1 登录页

**根据“pages\examples”中的register.html构建登录页**

**完成图：**

![image-20230921220748227](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921220748227.png)

**未输入用户名或密码时，会报错**

![屏幕截图 2023-09-21 220817](https://raw.githubusercontent.com/cute-karl/shixunimage/main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-21%20220817.png)

![屏幕截图 2023-09-21 220822](https://raw.githubusercontent.com/cute-karl/shixunimage/main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-21%20220822.png)

**用户名不存在时，也会报错**

![image-20230921220903546](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921220903546.png)

### 7.2.2 欢迎页

![image-20230924175923040](https://raw.githubusercontent.com/1438802682/picgo_image/main/image-20230924175923040.png)

### 7.2.3 左侧菜单

![image-20230924181506679](https://raw.githubusercontent.com/1438802682/picgo_image/main/image-20230924181506679.png)

### 7.2.4 右侧欢迎页

![image-20230921230243722](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921230243722.png)

### 7.2.5 新增/修改数据页模板

![image-20230924181452539](https://raw.githubusercontent.com/1438802682/picgo_image/main/image-20230924181452539.png)

### 7.2.6 数据列表页模板

![image-20230924181419844](https://raw.githubusercontent.com/1438802682/picgo_image/main/image-20230924181419844.png)

### 7.2.7 考试页模板

![image-20230924181409444](https://raw.githubusercontent.com/1438802682/picgo_image/main/image-20230924181409444.png)

**考试页有倒计时和交卷按钮，倒计时和交卷按钮悬浮在页面上，倒计时结束后交卷按钮失效，变为不可点击状态。**

# 8 表设计

## 8.1 表关系

![image-20230921230437486](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921230437486.png)

## 8.2 表结构

| **用户表**         |              |                  |
| ------------------ | ------------ | ---------------- |
| **user**           |              |                  |
| **字段**           | **中文**     | **数据类型**     |
| **id**             | **主键**     | **自增int(11)**  |
| **username**       | **用户名**   | **varchar(255)** |
| **password**       | **密码**     | **varchar(255)** |
| **real_name**      | **姓名**     | **varchar(255)** |
| **sex**            | **性别**     | **varchar(255)** |
| **sno**            | **学号**     | **varchar(255)** |
| **admission_date** | **入学时间** | **datetime**     |
| **faculty_id**     | **院系id**   | **int(2)**       |
| **major_id**       | **专业id**   | **int(5)**       |
| **class_id**       | **班级id**   | **int(5)**       |

| **角色表**    |              |                  |
| ------------- | ------------ | ---------------- |
| **role**      |              |                  |
| **字段**      | **中文**     | **数据类型**     |
| **id**        | **主键**     | **自增int(2)**   |
| **role_code** | **角色编码** | **varchar(50)**  |
| **role_name** | **角色中文** | **varchar(255)** |

| **用户与角色关联表** |            |              |
| -------------------- | ---------- | ------------ |
| **user_role**        |            |              |
| **字段**             | **中文**   | **数据类型** |
| **use_id**           | **用户id** | **int(10)**  |
| **role_id**          | **角色id** | **int(2)**   |

| **菜单表**     |              |                  |
| -------------- | ------------ | ---------------- |
| **menu**       |              |                  |
| **字段**       | **中文**     | **数据类型**     |
| **id**         | **主键**     | **自增int(2)**   |
| **menu_code**  | **菜单编码** | **varchar(50)**  |
| **menu_name**  | **菜单中文** | **varchar(255)** |
| **menu_url**   | **菜单url**  | **varchar(255)** |
| **menu_level** | **菜单级别** | **varchar(255)** |
| **parent_id**  | **父菜单id** | **int(5)**       |
| **sort**       | **排序**     | **int(5)**       |

| **角色与菜单关联表** |            |              |
| -------------------- | ---------- | ------------ |
| **role_menu**        |            |              |
| **字段**             | **中文**   | **数据类型** |
| **role_id**          | **角色id** | **int(2)**   |
| **menu_id**          | **菜单id** | **int(2)**   |

| **院系表**       |              |                 |
| ---------------- | ------------ | --------------- |
| **faculty**      |              |                 |
| **字段**         | **中文**     | **数据类型**    |
| **id**           | **主键**     | **自增int(2)**  |
| **faculty_name** | **院系名称** | **varchar(50)** |

| **专业表**     |              |                 |
| -------------- | ------------ | --------------- |
| **major**      |              |                 |
| **字段**       | **中文**     | **数据类型**    |
| **id**         | **主键**     | **自增int(5)**  |
| **faculty_id** | **院系id**   | **int(2)**      |
| **major_name** | **专业名称** | **varchar(50)** |

| **班级表**     |              |                 |
| -------------- | ------------ | --------------- |
| **class**      |              |                 |
| **字段**       | **中文**     | **数据类型**    |
| **id**         | **主键**     | **自增int(5)**  |
| **faculty_id** | **院系id**   | **int(2)**      |
| **major_id**   | **专业id**   | **int(5)**      |
| **class_name** | **班级名称** | **varchar(50)** |

| **科目表**       |              |                 |
| ---------------- | ------------ | --------------- |
| **subject**      |              |                 |
| **字段**         | **中文**     | **数据类型**    |
| **id**           | **主键**     | **自增int(5)**  |
| **subject_name** | **科目名称** | **varchar(50)** |

| **专业学期表**     |                          |                |
| ------------------ | ------------------------ | -------------- |
| **major_semester** |                          |                |
| **字段**           | **中文**                 | **数据类型**   |
| **id**             | **主键**                 | **自增int(5)** |
| **major_id**       | **专业id**               | **int(5)**     |
| **school_year**    | **学年，1、2、3…**       | **int(2)**     |
| **semester**       | **学期，上学期0下学期1** | **int(1)**     |

| **专业学期科目表**         |                |              |
| -------------------------- | -------------- | ------------ |
| **major_semester_subject** |                |              |
| **字段**                   | **中文**       | **数据类型** |
| **major_semester_id**      | **专业学期id** | **int(5)**   |
| **subject_id**             | **科目id**     | **int(5)**   |

# 9 MyBatis逆向工程

**使用MyBatis根据数据库的表生成对应的实体类、mapper接口和mapper的xml文件。**

 

**1、创建一个新的数据库账户，只给这个账户指需要逆向工程的数据库的读的权限，用来完成逆向工程。**

**账户是mybatis，密码是111111，需要逆向工程的数据库是emis**

**1）添加账户信息**

![img](https://raw.githubusercontent.com/cute-karl/shixunimage/main/wps13.jpg) 

 

**2）授权**

![img](https://raw.githubusercontent.com/cute-karl/shixunimage/main/wps14.jpg) 

 

**也可以使用SQL语句完成添加用户并授权（mysql8版本）**

```sql
# 创建用户

CREATE USER 'test1'@'%' IDENTIFIED BY '123456';

# 更改密码加密规则

ALTER USER 'test1'@'%' IDENTIFIED WITH mysql_native_password BY '123456';

# 授权查询权限

GRANT SELECT ON `test`.* TO test1@'%' WITH GRANT OPTION;

# 刷新权限

FLUSH PRIVILEGES;
```

 

**2、添加依赖**

**先放开之前的注释，除了我们已经添加的mybatis的依赖之外，我们需要再添加mybatis-generator-core的依赖**

 

```xml
<dependency>

  <groupId>org.mybatis.generator</groupId>

  <artifactId>mybatis-generator-core</artifactId>

  <version>1.4.0</version>

</dependency>
```

 

**3、编写逆向工程的配置文件generatorConfig.xml**

![image-20230921232037526](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921232037526.png)

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE generatorConfiguration
        PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd">
<generatorConfiguration>
    <context id="testTables" targetRuntime="MyBatis3">
        <commentGenerator>
            <!-- 是否去除自动生成的注释 true：是 ： false:否 -->
            <property name="suppressAllComments" value="true" />
        </commentGenerator>
        <!--数据库连接的信息：驱动类、连接地址、用户名、密码 -->
        <jdbcConnection driverClass="com.mysql.cj.jdbc.Driver"
                        connectionURL="jdbc:mysql://slave3:3306/emis" userId="mybatis" password="111111">
        </jdbcConnection>
        <!-- <jdbcConnection driverClass="oracle.jdbc.OracleDriver"
        connectionURL="jdbc:oracle:thin:@127.0.0.1:1521:yycg" userId="yycg"  password="yycg">
        </jdbcConnection> -->
        <!-- 默认false，把JDBC DECIMAL 和 NUMERIC 类型解析为 Integer，为 true时把JDBC DECIMAL 和
        NUMERIC 类型解析为java.math.BigDecimal -->
        <javaTypeResolver>
            <property name="forceBigDecimals" value="false" />
        </javaTypeResolver>

        <!-- targetProject:生成PO类的位置 -->
        <javaModelGenerator targetPackage="com.test.emis.entity"
                            targetProject=".\src\main\java">
            <!-- enableSubPackages:是否让schema作为包的后缀 -->
            <property name="enableSubPackages" value="false" />
            <!-- 从数据库返回的值不清理前后的空格，直接返回 -->
            <property name="trimStrings" value="false" />
        </javaModelGenerator>

        <!-- targetProject:mapper映射文件生成的位置 -->
        <sqlMapGenerator targetPackage="com.test.emis.mapper"
                         targetProject=".\src\main\java">
            <!-- enableSubPackages:是否让schema作为包的后缀 -->
            <property name="enableSubPackages" value="false" />
        </sqlMapGenerator>

        <!-- targetPackage：mapper接口生成的位置 -->
        <javaClientGenerator type="XMLMAPPER" targetPackage="com.test.emis.mapper"
                             targetProject=".\src\main\java">
            <!-- enableSubPackages:是否让schema作为包的后缀 -->
            <property name="enableSubPackages" value="false" />
        </javaClientGenerator>
        <!-- 指定数据库表 ，不生成Example相关的代码和配置-->
        <table tableName="class" enableCountByExample="false"
               enableUpdateByExample="false" enableDeleteByExample="false"
               enableSelectByExample="false" selectByExampleQueryId="false"></table>
        <table tableName="examination_question" enableCountByExample="false"
               enableUpdateByExample="false" enableDeleteByExample="false"
               enableSelectByExample="false" selectByExampleQueryId="false"></table>
        <table tableName="faculty" enableCountByExample="false"
               enableUpdateByExample="false" enableDeleteByExample="false"
               enableSelectByExample="false" selectByExampleQueryId="false"></table>
        <table tableName="major" enableCountByExample="false"
               enableUpdateByExample="false" enableDeleteByExample="false"
               enableSelectByExample="false" selectByExampleQueryId="false"></table>
        <table tableName="major_semester" enableCountByExample="false"
               enableUpdateByExample="false" enableDeleteByExample="false"
               enableSelectByExample="false" selectByExampleQueryId="false"></table>
        <table tableName="major_semester_subject" enableCountByExample="false"
               enableUpdateByExample="false" enableDeleteByExample="false"
               enableSelectByExample="false" selectByExampleQueryId="false"></table>
        <table tableName="menu" enableCountByExample="false"
               enableUpdateByExample="false" enableDeleteByExample="false"
               enableSelectByExample="false" selectByExampleQueryId="false"></table>
        <table tableName="question_bank" enableCountByExample="false"
               enableUpdateByExample="false" enableDeleteByExample="false"
               enableSelectByExample="false" selectByExampleQueryId="false"></table>
        <table tableName="question_options" enableCountByExample="false"
               enableUpdateByExample="false" enableDeleteByExample="false"
               enableSelectByExample="false" selectByExampleQueryId="false"></table>
        <table tableName="question_template" enableCountByExample="false"
               enableUpdateByExample="false" enableDeleteByExample="false"
               enableSelectByExample="false" selectByExampleQueryId="false"></table>
        <table tableName="role" enableCountByExample="false"
               enableUpdateByExample="false" enableDeleteByExample="false"
               enableSelectByExample="false" selectByExampleQueryId="false"></table>
        <table tableName="role_menu" enableCountByExample="false"
               enableUpdateByExample="false" enableDeleteByExample="false"
               enableSelectByExample="false" selectByExampleQueryId="false"></table>
        <table tableName="score" enableCountByExample="false"
               enableUpdateByExample="false" enableDeleteByExample="false"
               enableSelectByExample="false" selectByExampleQueryId="false"></table>
        <table tableName="subject" enableCountByExample="false"
               enableUpdateByExample="false" enableDeleteByExample="false"
               enableSelectByExample="false" selectByExampleQueryId="false"></table>
        <table tableName="user" enableCountByExample="false"
               enableUpdateByExample="false" enableDeleteByExample="false"
               enableSelectByExample="false" selectByExampleQueryId="false"></table>
        <table tableName="user_role" enableCountByExample="false"
               enableUpdateByExample="false" enableDeleteByExample="false"
               enableSelectByExample="false" selectByExampleQueryId="false"></table>
    </context>
</generatorConfiguration>
```

**4、编写逆向工程的java类**

![image-20230921232157886](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921232157886.png)

**5、运行Generator类的main方法生成实体类、mapper接口和mapper的xml文件**

# 10 springboot项目中使用MyBatis



## 10.1 三层架构

**1、什么是三层？**

- **UI(表现层): 主要是指与用户直接交互的部分。用于接收用户输入的数据和显示处理后用户需要的数据。**
- **BLL:(业务逻辑层): UI层和DAL层之间的桥梁。实现业务逻辑。业务逻辑具体包含：验证、计算、业务规则等等。**
- **DAL:(数据访问层): 与数据库打交道。主要实现对数据的增、删、改、查。将存储在数据库中的数据提交给业务层，同时将业务层处理的数据保存到数据库。（当然这些操作都是基于UI层的。用户的需求反映给界面（UI），UI反映给BLL，BLL反映给DAL，DAL进行数据的操作，操作后再一一返回，直到将用户所需数据反馈给用户）**

![img](https://raw.githubusercontent.com/cute-karl/shixunimage/main/wps15.jpg) 

**2、为什么使用三层架构**

**代码解耦。**

**便于开发和维护，发生在哪一层的变化，只需更改该层，不需要更改整个系统。层次清晰，分工明确，每层之间耦合度低——提高了效率，适应需求变化，可维护性高，可扩展性高**

 

**3、根据三层架构划分代码**

![img](https://raw.githubusercontent.com/cute-karl/shixunimage/main/wps16.jpg) 

 

**三层架构是一种架构思想，目的是代码的解耦，不是说前端就必须是使用html+js，后端必须使用java、Python、PHP等等这些。假设一个项目完全使用js开发，也是可以按照三层架构思想完成分层，划分出controller、service、dao这些。**

 

**4、本项目中三层结构的应用**

1. **前端，html+css+js。**
2. **controller，接收请求和响应，使用springboot的controller。**
3. **3service，业务逻辑处理，面向接口编程（解耦）。**
4. **dao，操作数据库，使用MyBatis框架，mapper接口+xml。**





## 10.2 实操

**实现登录**

### 10.2.1 准备工作

**1、pom.xml配置**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <!-- 引入springboot的父工程 -->
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>2.6.2</version>
        <relativePath/> <!-- lookup parent from repository -->
    </parent>

    <groupId>com.shixun.skd.xg19</groupId>
    <artifactId>emis</artifactId>
    <version>1.0-SNAPSHOT</version>

    <!-- 配置信息 -->
    <properties>
        <!-- java的jdk版本 -->
        <java.version>1.8</java.version>
    </properties>

    <!-- 所有的依赖，指定需要加载的第三方jar包以及它的版本 -->
    <dependencies>
        <!-- springboot的web模块，接收请求和响应请求 -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>

        <!-- mybatis与springboot整合依赖 -->
        <dependency>
            <groupId>org.mybatis.spring.boot</groupId>
            <artifactId>mybatis-spring-boot-starter</artifactId>
            <version>2.2.1</version>
        </dependency>

        <!-- mysql驱动 -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <scope>runtime</scope>
            <version>5.1.32</version>
        </dependency>

        <!-- mybatis逆向工程依赖 -->
        <dependency>
            <groupId>org.mybatis.generator</groupId>
            <artifactId>mybatis-generator-core</artifactId>
            <version>1.4.0</version>
        </dependency>

        <!-- 数据库连接池 -->
        <dependency>
            <groupId>com.alibaba</groupId>
            <artifactId>druid</artifactId>
            <version>1.1.23</version>
        </dependency>



        <!-- json 相关工具类 -->
        <dependency>
            <groupId>com.alibaba</groupId>
            <artifactId>fastjson</artifactId>
            <version>1.2.73</version>
        </dependency>

        <!-- poi解析Excel文件的依赖 -->
        <dependency>
            <groupId>org.apache.poi</groupId>
            <artifactId>poi</artifactId>
            <version>3.14</version>
        </dependency>
        <dependency>
            <groupId>org.apache.poi</groupId>
            <artifactId>poi-ooxml</artifactId>
            <version>3.14</version>
        </dependency>
    </dependencies>

    <build>
        <defaultGoal>compile</defaultGoal>
        <!--
        springboot项目启动时，默认过滤掉src/main/java下的所有xml文件
        我们要使用mybatis，mybatis的xml文件在mapper包下，mapper在src/main/java下
        需要通过以下配置，指定pringboot项目启动时，不过滤src/main/java下的所有xml文件
        -->
        <resources>
            <resource>
                <directory>src/main/java</directory>
                <includes>
                    <include>**/*.xml</include>
                </includes>
                <filtering>false</filtering>
            </resource>
        </resources>
    </build>

</project>
```

**2、application.yml配置**

![image-20230921232534479](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921232534479.png)

### 10.2.2 前端实现

 

**1、编写登录页面**

 ![image-20230921232651652](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921232651652.png)

**2、编写js**

**使用jQuery获取输入框的值（包含前端校验），使用ajax向controller发起登录请求，根据响应数据判断登录是否成功，如果成功跳转到index页面，如果失败提示“用户名密码错误！”并且停留在登录页面。**

![image-20230921232722576](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921232722576.png)

### 10.2.3 实现dao

**我们使用MyBatis框架，逆向工程已经生成数据库表对应的Entity、mapper接口和xml映射文件。**

**1、UserMapper接口上加上@Mapper注解**

![image-20230921232832923](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921232832923.png)

**2、在UserMapper接口中，添加查询user的方法，参数user对象，返回值是user对象。**

![image-20230921232903639](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921232903639.png)

**3、在UserMapper.xml文件中，添加查询配置，具体如下**

```xml
<select id="login" parameterType="com.shixun.entity.User" resultMap="BaseResultMap">
  select
  <include refid="Base_Column_List" />
  from user
  where username = #{username} and password = #{password}
</select>
```

**注意，xml映射文件中的配置的id与mapper接口的方法名一一对应。**

### 10.2.4 实现service

**1、编写UserService接口，代码如下。**

![image-20230921233216700](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921233216700.png)

**2、编写实现类UserServiceImpl，类上加@Service注解，依赖注入UserMapper属性，代码如下。**

![image-20230921233303176](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921233303176.png)

### 10.2.5 实现controller

![image-20230921233339236](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921233339236.png)

# 11 功能实现



## 11.1 菜单管理

### 11.1.1 新增菜单

**与登陆实现方式类似，关键逻辑如下。**

**1、菜单总共2级，页面需要做选择菜单级别的下拉列表。**

**2、当选择菜单级别为二级菜单时，需要显示一级菜单下拉列表（下拉选项从数据库查询），此处需要下拉列表联动处理。**

![image-20230924181326059](https://raw.githubusercontent.com/1438802682/picgo_image/main/image-20230924181326059.png)

### 11.1.2 菜单列表

![image-20230924181338147](https://raw.githubusercontent.com/1438802682/picgo_image/main/image-20230924181338147.png)

#### 11.1.2.1 前端部分

**1、html页面中必须有以下代码，这个div就是列表加载的div**

 ```html
 <div id="jsGrid1"></div>
 ```



**2、编写js**

 ```js
 $(function () {
 
   $("#jsGrid1").jsGrid({
 
     width: "100%",
 
     height: "auto",
 
     sorting: true, // 排序
 
     paging: true, // 分页计算，底部上一页下一页展示
 
     pageLoading: true, //启动后台加载分页数据
 
     autoload: true, //自动加载
 
     controller:{
 
       loadData: function(filter){
 
         return $.ajax({
 
           type: "post",
 
           url: "/menu/list",
 
           dataType: "json",
 
           data: filter
 
         });
 
       }
     },
 
     pageIndex: 1, //当前页数，是第几页
 
     pageSize: 3, //每页数据条数
 
     pageButtonCount: 10, //展示可选页码数量
 
     pagePrevText: "上一页",
 
     pageNextText: "下一页",
 
     pageFirstText: "首页",
 
     pageLastText: "尾页",
 
     fields: [
 
       {
 
         title: "", name: "id", type: "text", width: 20, align: "center",
 
         itemTemplate: function(value, item){
 
           return "<input type='checkbox' value='" + value + "'>";
 
         }
 
       },
 
       { title: "菜单名", name: "menuName", type: "text", width: 100 },
 
       { title: "菜单编码", name: "menuCode", type: "text", width: 80 },
 
       { title: "菜单url", name: "menuUrl", type: "text", width: 80 },
 
       { title: "上级菜单", name: "parentMenu", type: "text", width: 80 },
 
       {
 
         title: "操作", name: "id", type: "text", width: 60, align: "center",
 
         itemTemplate: function(value, item){
 
           return "<a href='javascript:void(0)' onclick='alert(" + value + ");'>修改</a>"
 
           + "  <a href='javascript:void(0)' onclick='alert(" + value + ");'>删除</a>";
 
         }
 
       }
 
     ]
 
   });
 
  });
 
 ```





#### 11.1.2.2 后端部分

 

**1、controller接收JSGrid请求参数**

```java
String pageSize = request.getParameter("pageSize");

String pageIndex = request.getParameter(**"**pageIndex**"**);

```

**2、controller返回json格式**

```java
{

"data" : 数据集合,

"itemsCount" : 总条数

}
```

**3、dao查询逻辑**

**1）根据pageIndex 和pageSize 做limit分页查询**

**SQL语句：**

```sql
String sql = "SELECT \* FROM user1 limit ?,?"; 
```

**limit参数：**

**偏移量 =（pageIndex - 1）\* pageSize** 

**步长 = pageSize** 

**2）查询总条数**

```sql
select count(\*) from user;
```



### 11.1.3 菜单删除

**ajax请求，根据菜单id删除数据。**

### 11.1.4 菜单修改

1. **与菜单新增共用页面，在新增页添加一个隐藏域，用来存放被修改菜单的id值。**
2. **在菜单加载的时候判断隐藏域有没有值，有值就是修改页，没有值就是新增页。**
3. **是修改页的时候，ajax请求，根据菜单id查询数据，回填到表单元素中。其中注意回填父菜单，判断被修改的菜单的是不是二级菜单，如果是二级菜单，需要给父菜单的下拉列表加载所有的一级菜单选项，并且设置被修改的菜单的原一级菜单的选项是选中的。**
4. **提交修改到controller，与add基本一致，这里要注意需要把菜单的id值作为参数传递。**



## 11.2 角色管理

### 11.2.1 新增角色

 ![image-20230921234232135](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921234232135.png)

**新增角色功能与新增菜单差不多，其中有些特殊处理：**

> **给角色关联菜单，一个角色是可以关联多个菜单的，菜单本身也有层级关系（父子菜单结构），这个在页面展示选择菜单的时候，使用Tree结构更合适。**
>
> **Tree结构的实现方式很多，我们这里使用zTree来实现。**
>
> **新增角色，需要新增角色本身以及角色菜单关联表，要保证两个写的操作同时成功，否则就全部失败，这就需要使用数据库事务来实现。**
>
> **数据库事务( transaction)是访问并可能操作各种数据项的一个数据库操作序列，这些操作要么全部执行,要么全部不执行，是一个不可分割的工作单位。事务由事务开始与事务结束之间执行的全部数据库操作组成。**

 **关键代码：**

![image-20230921234315969](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921234315969.png)

**2、role-add.html页面引入ztree的js和css**

```html
<link rel="stylesheet" href="../css/zTreeStyle/zTreeStyle.css" 
type="text/css">

<script src="../js/ztree/jquery.ztree.all.min.js"></script>
```

**3、role-add.html页面，去掉下拉列表部分，增加以下代码**

```html
<div class="form-group">
 <label for="menuTree">菜单列表</label>

 <ul id="menuTree" class="ztree"></ul>

 <input type="hidden" id="menuIds" class="form-control">

</**div**>
```

**4、role-add.js中新增以下代码**

```js
$(function(){

  $.ajax({

    type: "POST",

    url: "/emis/menu/tree.do",

    dataType: "json",

    success: function(data){

      loadMenuTree(data);

    }

  });

});

var loadMenuTree = function(zNodes){

  var zTreeObj;

  var setting = {

    view: {

      selectedMulti: true,

      showIcon: true,

      showLine: true,

      showTitle: true,

    },

    data: {

      simpleData: {

        enable: true,

        idKey: "id",

        pIdKey: "parentId",

        rootPId: "0"

      },

      key: {

        name: "menuName"

      }

    },

    check: {

      enable: true

    }

  };

  zTreeObj = $.fn.zTree.init($("#menuTree"), setting, zNodes);

}

var getCheckedMenuIds = function(){

  var treeObj = $.fn.zTree.getZTreeObj("menuTree");

  var nodes = treeObj.getCheckedNodes(true);

  var ids = "";

  $.each(nodes, function(index, node){

    ids += "," + node.id;

  });

  ids = ids.substring(1, ids.length);

  return ids;

}
```

**5、role-add.js中的roleadd方法，添加如下代码**

![image-20230921234507925](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921234507925.png)

**6、后端在新增角色菜单关联表时，需要使用新增角色的主键id，这个可以在mybatis的xml中的insert标签配置以下属性，就可以把id值赋值到实参对象的id属性上。**

 ```xml
 <insert id="xxx" parameterType="xxxxx" useGeneratedKeys="true"** keyProperty="id">
 ```

### 11.2.2 角色列表

![image-20230922180829176](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230922180829176.png)

**无特殊处理，仿照菜单列表实现。**

 

### 11.2.3 删除角色

**删除角色需要同时删除角色表和角色菜单关联表的数据，service方法设置事务。**

 

### 11.2.4 修改角色

**1、数据回填到页面时，需要查询角色下属的菜单id，设置菜单ztree节点选中，js关键代码如下。**

```js
var arr = ['11','12'];

var zTree = $.fn.zTree.getZTreeObj("menuTree");

$.each(arr,**function**(index,v){

  **var** node = zTree.getNodeByParam(**"id"**,v);

  **if**(node.parentId != 0){ *//* *判断是二级节点*

  zTreeObj.checkNode(node, **true**, **true**); *//* *设置节点选中*

  }

});
```



**2、提交数据到后台，在修改角色时，数据库操作如下。**

**1）修改角色表数据**

**2）删除角色对应的角色菜单关联表数据，新增角色菜单关联表数据**



## 11.3 用户管理

### 11.3.1 新增用户

![image-20230924181240220](https://raw.githubusercontent.com/1438802682/picgo_image/main/image-20230924181240220.png)

**根据新增菜单实现，特殊部分如下。**

**1、页面部分表单除了用户本身数据，还有角色数据。我们这里只考虑用户和角色一对一关联，ajax加载一个角色的下拉列表即可。**

**2、后台除了保存用户本身数据，还要保存用户角色关联数据，一个事务中完成。**

 **前端：**

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AdminLTE 3 | Project Add</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../dist/css/adminlte.min.css">
</head>
<body class="hold-transition sidebar-mini">
<!-- Site wrapper -->

  <!-- Navbar -->

  <!-- /.navbar -->

  <!-- Main Sidebar Container -->


  <!-- Content Wrapper. Contains page content -->

    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">

          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active" id="my-title">新增用户</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
          <div class="card card-primary">
            <div class="card-header">
              <h3 class="card-title"></h3>

              <div class="card-tools">
                <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                  <i class="fas fa-minus"></i>
                </button>
              </div>
            </div>
              <!--
              type="hidden"时候，是隐藏域，在代码中存在，但是不会在浏览器展示
              -->
              <input type="hidden" id="objId">
            <div class="card-body">
              <div class="form-group">
                <label for="username">用户名</label>
                <input type="text" id="username" class="form-control">
              </div>
                <div class="form-group">
                    <label for="password">密码</label>
                    <input type="password" id="password" class="form-control">
                </div>
                <div class="form-group">
                    <label for="realName">姓名</label>
                    <input type="text" id="realName" class="form-control">
                </div>
                <div class="form-group">
                    <label for="sex">性别</label>
                    <select id="sex" class="form-control custom-select">
                        <option value="">--请选择--</option>
                        <option value="0">男</option>
                        <option value="1">女</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="sno">学号</label>
                    <input type="text" id="sno" class="form-control">
                </div>

                <!-- 下面院系、专业、班级3个下拉列表都是同ajax动态加载 -->
              <div class="form-group">
                <label for="facultyId">院系</label>
                <select id="facultyId" class="form-control custom-select" onchange="createMajor()">

                </select>
              </div>

                <!-- 院系选中的选项发生改变的时候，去加载专业下拉列表 -->
                <div class="form-group">
                    <label for="majorId">专业</label>
                    <select id="majorId" class="form-control custom-select" onchange="createClass()">

                    </select>
                </div>

                <!-- 专业选中的选项发生改变的时候，加载班级下拉列表，根据专业id查询班级 -->
                <div class="form-group">
                    <label for="classId">班级</label>
                    <select id="classId" class="form-control custom-select">

                    </select>
                </div>

                <!-- 角色的下拉列表，在页面加载之后自动加载 -->
                <div class="form-group">
                    <label for="roleId">角色</label>
                    <select id="roleId" class="form-control custom-select">

                    </select>
                </div>

            </div>
            <!-- /.card-body -->
          </div>
          <!-- /.card -->
        </div>
        <div class="col-md-2"></div>

      </div>
      <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
          <a href="#" class="btn btn-secondary">清空</a>
          <input type="button" value="提交" class="btn btn-success float-right" onclick="subForm()">
        </div>

        <div class="col-md-2"></div>
      </div>
    </section>
    <!-- /.content -->

  <!-- /.content-wrapper -->



  <!-- Control Sidebar -->
  <!-- /.control-sidebar -->

<!-- ./wrapper -->

<!-- jQuery -->
<script src="../plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="../dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../dist/js/demo.js"></script>
<script src="../js/user-add.js"></script>
<script src="../js/common.js"></script>
</body>
</html>

```



### 11.3.2 用户列表

![image-20230922180857130](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230922180857130.png)

**根据角色列表完成即可，后台SQL的查询条件是按照用户名查询即可。**

 ```html
 <!DOCTYPE html>
 <html lang="en">
 <head>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <title>AdminLTE 3 | jsGrid</title>
 
   <!-- Google Font: Source Sans Pro -->
   <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
   <!-- Font Awesome -->
   <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
   <!-- jsGrid -->
   <link rel="stylesheet" href="../plugins/jsgrid/jsgrid.min.css">
   <link rel="stylesheet" href="../plugins/jsgrid/jsgrid-theme.min.css">
   <!-- Theme style -->
   <link rel="stylesheet" href="../dist/css/adminlte.min.css">
 </head>
 <body class="hold-transition sidebar-mini">
 
   <!-- Navbar -->
 
   <!-- /.navbar -->
 
   <!-- Main Sidebar Container -->
 
 
   <!-- Content Wrapper. Contains page content -->
 
     <!-- Content Header (Page header) -->
     <section class="content-header">
       <div class="container-fluid">
         <div class="row mb-2">
           <div class="col-sm-6">
 
           </div>
           <div class="col-sm-6">
             <ol class="breadcrumb float-sm-right">
               <li class="breadcrumb-item"><a href="#">Home</a></li>
               <li class="breadcrumb-item active">用户列表</li>
             </ol>
           </div>
         </div>
       </div><!-- /.container-fluid -->
     </section>
 
     <!-- Main content -->
     <section class="content">
       <div class="card">
         <div class="card-header">
           <!-- 这里放一个查询框 -->
             <div class="input-group">
                 <input type="search" id="search" class="form-control form-control-lg" placeholder="请输入用户名">
                 <div class="input-group-append">
                     <button type="button" class="btn btn-lg btn-default" onclick="createTable()">
                         <i class="fa fa-search"></i>
                     </button>
                 </div>
             </div>
         </div>
         <!-- /.card-header -->
         <div class="card-body">
           <div id="jsGrid1"></div>
         </div>
         <!-- /.card-body -->
       </div>
       <!-- /.card -->
     </section>
     <!-- /.content -->
 
   <!-- /.content-wrapper -->
 
 
   <!-- Control Sidebar -->
 
   <!-- /.control-sidebar -->
 
 <!-- ./wrapper -->
 
 <!-- jQuery -->
 <script src="../plugins/jquery/jquery.min.js"></script>
 <!-- Bootstrap 4 -->
 <script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
 <!-- jsGrid -->
 <script src="../plugins/jsgrid/demos/db.js"></script>
 <script src="../plugins/jsgrid/jsgrid.min.js"></script>
 <!-- AdminLTE App -->
 <script src="../dist/js/adminlte.min.js"></script>
 <!-- AdminLTE for demo purposes -->
 <script src="../dist/js/demo.js"></script>
 <script src="../js/user-list.js"></script>
 <!-- Page specific script -->
 <script>
 
 </script>
 </body>
 </html>
 
 ```



### 11.3.3 修改用户

 

**1、回填表单数据时，除了回填用户本身数据，还要设置角色下拉列表的选项的选中。**

**2、后台保存修改用户的数据和保存修改角色类似，需要完成3个操作，在一个事务中。**

- **保存用户数据本身。**
- **根据根据用户id删除用户角色关联表数据。**
- **新增用户角色关联表数据。**

 

### 11.3.4 删除用户

 

**需要完成2个操作，在一个事务中。**

**1、删除用户数据。**

**2、根据根据用户id删除用户角色关联表数据。**



## 11.4 院系管理

 

### 11.4.1 新建院系

![image-20230924181220388](https://raw.githubusercontent.com/1438802682/picgo_image/main/image-20230924181220388.png)

**前端：**

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AdminLTE 3 | Project Add</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../dist/css/adminlte.min.css">
</head>
<body class="hold-transition sidebar-mini">
<!-- Site wrapper -->

  <!-- Navbar -->

  <!-- /.navbar -->

  <!-- Main Sidebar Container -->


  <!-- Content Wrapper. Contains page content -->

    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">

          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active"id="my-title">新增院系</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
          <div class="card card-primary">
            <div class="card-header">
              <h3 class="card-title"></h3>

              <div class="card-tools">
                <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                  <i class="fas fa-minus"></i>
                </button>
              </div>
            </div>
            <!--
             type="hidden"时候，是隐藏域，在代码中存在，但是不会在浏览器展示
             -->
              <input type="hidden" id="objId">
            <div class="card-body">
              <div class="form-group">
                <label for="facultyName">院系名称</label>
                <input type="text" id="facultyName" class="form-control">
              </div>
            </div>
            <!-- /.card-body -->
          </div>
          <!-- /.card -->
        </div>
        <div class="col-md-2"></div>

      </div>
      <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
          <a href="#" class="btn btn-secondary">清空</a>
          <input type="button" value="提交" class="btn btn-success float-right" onclick="subForm()">
        </div>

        <div class="col-md-2"></div>
      </div>
    </section>
    <!-- /.content -->

  <!-- /.content-wrapper -->



  <!-- Control Sidebar -->
  <!-- /.control-sidebar -->

<!-- ./wrapper -->

<!-- jQuery -->
<script src="../plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="../dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../dist/js/demo.js"></script>
<script src="../js/faculty-add.js"></script>
</body>
</html>

```



### 11.4.2 院系列表

![image-20230921235434579](https://raw.githubusercontent.com/cute-karl/shixunimage/main/image-20230921235434579.png)

**前端：**

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AdminLTE 3 | jsGrid</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
  <!-- jsGrid -->
  <link rel="stylesheet" href="../plugins/jsgrid/jsgrid.min.css">
  <link rel="stylesheet" href="../plugins/jsgrid/jsgrid-theme.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../dist/css/adminlte.min.css">
</head>
<body class="hold-transition sidebar-mini">

  <!-- Navbar -->

  <!-- /.navbar -->

  <!-- Main Sidebar Container -->


  <!-- Content Wrapper. Contains page content -->

    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">

          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">院系列表</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="card">
        <div class="card-header">
          <!-- 这里放一个查询框 -->
            <div class="input-group">
                <input type="search" id="search" class="form-control form-control-lg" placeholder="请输入院系名">
                <div class="input-group-append">
                    <button type="button" class="btn btn-lg btn-default" onclick="createTable()">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- /.card-header -->
        <div class="card-body">
          <div id="jsGrid1"></div>
        </div>
        <!-- /.card-body -->
      </div>
      <!-- /.card -->
    </section>
    <!-- /.content -->

  <!-- /.content-wrapper -->


  <!-- Control Sidebar -->

  <!-- /.control-sidebar -->

<!-- ./wrapper -->

<!-- jQuery -->
<script src="../plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- jsGrid -->
<script src="../plugins/jsgrid/demos/db.js"></script>
<script src="../plugins/jsgrid/jsgrid.min.js"></script>
<!-- AdminLTE App -->
<script src="../dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../dist/js/demo.js"></script>
<script src="../js/faculty-list.js"></script>
<!-- Page specific script -->
<script>

</script>
</body>
</html>
```



### 11.4.3 修改院系

  测试通过！

### 11.4.4 删除院系

 测试通过！

 

## 11.5 专业管理

### 11.5.1 新建专业

![image-20230924181046853](https://raw.githubusercontent.com/1438802682/picgo_image/main/image-20230924181046853.png)

**前端：**

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AdminLTE 3 | Project Add</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../dist/css/adminlte.min.css">
</head>
<body class="hold-transition sidebar-mini">
<!-- Site wrapper -->

  <!-- Navbar -->

  <!-- /.navbar -->

  <!-- Main Sidebar Container -->


  <!-- Content Wrapper. Contains page content -->

    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">

          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active"id="my-title">新增专业</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
          <div class="card card-primary">
            <div class="card-header">
              <h3 class="card-title"></h3>

              <div class="card-tools">
                <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                  <i class="fas fa-minus"></i>
                </button>
              </div>
            </div>
              <input type="hidden" id="objId">
            <div class="card-body">
                <!-- 页面加载的时候，自动加载院系下拉列表 -->
                <div class="form-group">
                    <label for="facultyId">院系</label>
                    <select id="facultyId" class="form-control custom-select">

                    </select>
                </div>

              <div class="form-group">
                <label for="majorName">专业名称</label>
                <input type="text" id="majorName" class="form-control">
              </div>
            </div>
            <!-- /.card-body -->
          </div>
          <!-- /.card -->
        </div>
        <div class="col-md-2"></div>

      </div>
      <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
          <a href="#" class="btn btn-secondary">清空</a>
          <input type="button" value="提交" class="btn btn-success float-right" onclick="subForm()">
        </div>

        <div class="col-md-2"></div>
      </div>
    </section>
    <!-- /.content -->

  <!-- /.content-wrapper -->



  <!-- Control Sidebar -->
  <!-- /.control-sidebar -->

<!-- ./wrapper -->

<!-- jQuery -->
<script src="../plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="../dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../dist/js/demo.js"></script>
<script src="../js/major-add.js"></script>
</body>
</html>

```



### 11.5.2 专业列表

![image-20230924180951973](https://raw.githubusercontent.com/1438802682/picgo_image/main/image-20230924180951973.png)

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AdminLTE 3 | jsGrid</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
  <!-- jsGrid -->
  <link rel="stylesheet" href="../plugins/jsgrid/jsgrid.min.css">
  <link rel="stylesheet" href="../plugins/jsgrid/jsgrid-theme.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../dist/css/adminlte.min.css">
</head>
<body class="hold-transition sidebar-mini">

  <!-- Navbar -->

  <!-- /.navbar -->

  <!-- Main Sidebar Container -->


  <!-- Content Wrapper. Contains page content -->

    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">

          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">专业列表</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="card">
        <div class="card-header">
          <!-- 这里放一个查询框 -->
            <div class="input-group">
                <input type="search" id="search" class="form-control form-control-lg" placeholder="请输入专业名">
                <div class="input-group-append">
                    <button type="button" class="btn btn-lg btn-default" onclick="createTable()">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- /.card-header -->
        <div class="card-body">
          <div id="jsGrid1"></div>
        </div>
        <!-- /.card-body -->
      </div>
      <!-- /.card -->
    </section>
    <!-- /.content -->

  <!-- /.content-wrapper -->


  <!-- Control Sidebar -->

  <!-- /.control-sidebar -->

<!-- ./wrapper -->

<!-- jQuery -->
<script src="../plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- jsGrid -->
<script src="../plugins/jsgrid/demos/db.js"></script>
<script src="../plugins/jsgrid/jsgrid.min.js"></script>
<!-- AdminLTE App -->
<script src="../dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../dist/js/demo.js"></script>
<script src="../js/major-list.js"></script>
<!-- Page specific script -->
<script>

</script>
</body>
</html>
```

### 11.5.3 修改专业

测试通过！

### 11.5.4 删除专业

测试通过！



## 11.6 班级管理

 

### 11.6.1 新增班级

![image-20230924180808524](https://raw.githubusercontent.com/1438802682/picgo_image/main/image-20230924180808524.png)

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AdminLTE 3 | Project Add</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../dist/css/adminlte.min.css">
</head>
<body class="hold-transition sidebar-mini">
<!-- Site wrapper -->

  <!-- Navbar -->

  <!-- /.navbar -->

  <!-- Main Sidebar Container -->


  <!-- Content Wrapper. Contains page content -->

    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">

          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active"id="my-title">新增班级</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
          <div class="card card-primary">
            <div class="card-header">
              <h3 class="card-title"></h3>

              <div class="card-tools">
                <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                  <i class="fas fa-minus"></i>
                </button>
              </div>
            </div>
              <input type="hidden" id="objId">
            <div class="card-body">
                <!-- 页面加载的时候，自动加载院系下拉列表 -->
                <div class="form-group">
                    <label for="facultyId">院系</label>
                    <select id="facultyId" class="form-control custom-select" onchange="createMajor()">

                    </select>
                </div>

                <!-- 专业下拉列表，院系下拉列表选项选中改变的时候（facultyId的onchange事件），去加载专业下拉列表 -->
                <div class="form-group">
                    <label for="majorId">专业</label>
                    <select id="majorId" class="form-control custom-select">

                    </select>
                </div>

              <div class="form-group">
                <label for="className">班级名称</label>
                <input type="text" id="className" class="form-control">
              </div>
            </div>
            <!-- /.card-body -->
          </div>
          <!-- /.card -->
        </div>
        <div class="col-md-2"></div>

      </div>
        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-8">
                <a href="#" class="btn btn-secondary">清空</a>
                <input type="button" value="提交" class="btn btn-success float-right" onclick="subForm()">
            </div>

            <div class="col-md-2"></div>
        </div>
    </section>
    <!-- /.content -->

  <!-- /.content-wrapper -->



  <!-- Control Sidebar -->
  <!-- /.control-sidebar -->

<!-- ./wrapper -->

<!-- jQuery -->
<script src="../plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="../dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../dist/js/demo.js"></script>
<script src="../js/class-add.js"></script>
</body>
</html>

```



### 11.6.2 班级列表

![image-20230924180716957](https://raw.githubusercontent.com/1438802682/picgo_image/main/image-20230924180716957.png)

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AdminLTE 3 | jsGrid</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
  <!-- jsGrid -->
  <link rel="stylesheet" href="../plugins/jsgrid/jsgrid.min.css">
  <link rel="stylesheet" href="../plugins/jsgrid/jsgrid-theme.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../dist/css/adminlte.min.css">
</head>
<body class="hold-transition sidebar-mini">

  <!-- Navbar -->

  <!-- /.navbar -->

  <!-- Main Sidebar Container -->


  <!-- Content Wrapper. Contains page content -->

    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">

          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">班级列表</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="card">
        <div class="card-header">
          <!-- 这里放一个查询框 -->
            <div class="input-group">
                <input type="search" id="search" class="form-control form-control-lg" placeholder="请输入班级名">
                <div class="input-group-append">
                    <button type="button" class="btn btn-lg btn-default" onclick="createTable()">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- /.card-header -->
        <div class="card-body">
          <div id="jsGrid1"></div>
        </div>
        <!-- /.card-body -->
      </div>
      <!-- /.card -->
    </section>
    <!-- /.content -->

  <!-- /.content-wrapper -->


  <!-- Control Sidebar -->

  <!-- /.control-sidebar -->

<!-- ./wrapper -->

<!-- jQuery -->
<script src="../plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- jsGrid -->
<script src="../plugins/jsgrid/demos/db.js"></script>
<script src="../plugins/jsgrid/jsgrid.min.js"></script>
<!-- AdminLTE App -->
<script src="../dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../dist/js/demo.js"></script>
<script src="../js/class-list.js"></script>
<!-- Page specific script -->
<script>

</script>
</body>
</html>
```

### 11.6.3 修改班级

测试通过！

### 11.6.4 删除班级

测试通过！
